@mut(ref fn) = (λnew(0) (fn (ref new)))
@main = #0{@mut(λret(0) λx(+ x 2)) ret}

// This requires a `seq` operator:

//#0{(λref λfn (λnew(0) (fn (ref new))) λret(0) λx(+ x 2)) ret}
//-------------------------------------------------------------
//#0{(λnew(0) (λx(+ x 2) (λret(0) new))) ret}
//-------------------------------------------
//#0{(λnew(0) (λx(+ x 2) (λret(0) new))) ret}
//-------------------------------------------
//new = (λx(+ x 2) (λret(0) new))
//#0{0 ret}
//-------------------------------- \/ won't evaluate further
//ret = new
//new = (λx(+ x 2) 0)
//#0{0 ret}
//--------------------------------
//ret = new
//new = (λx(+ x 2) 0)
//#0{0 ret}
//--------------------------------
//ret = new
//new = 2
//#0{0 ret}
//---------
//#0{0 2}
